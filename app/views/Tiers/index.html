#{extends 'Tiers/template.html' /}
#{set title:'Tiers' /}

#{if tiers != null}
<div class="bloc">
    
    <div class="content">
      <section>
      
        #{form @Tiers.enregistrer(), method:'POST'}
        
          #{if tiers.id != null}
            <input type="hidden" name="tiers.id" value="${tiers.id}"/>
          #{/if}
         
          #{field 'tiers.designation'}
          <p>
            <label for="${field.id}">Désignation</label>
            <input id="${field.id}" name="${field.name}" type="text" value="${field.value}"/>
            <span class="error">#{error field.name /}</span>
          </p>
          #{/field}
          
          #{field 'tiers.nom'}
          <p>
            <label for="${field.id}">Nom</label>
            <input id="${field.id}" name="${field.name}" type="text" value="${field.value}"/>
            <span class="error">#{error field.name /}</span>
          </p>
          #{/field}
          
          #{field 'tiers.prenom'}
          <p>
            <label for="${field.id}">Prénom</label>
            <input id="${field.id}" name="${field.name}" type="text" value="${field.value}"/>
            <span class="error">#{error field.name /}</span>
          </p>
          #{/field}
          
          <div class="submit">
            <input type="submit" name="valid"  value="Valider" />&nbsp;
            <input type="submit" name="validQuit" value="Valider & Fermer" class="white" />&nbsp;
            <a href="@{Tiers.index()}" class="button white">Annuler</a>
          </div>
          
        #{/form}
      
      </section>
    </div>
</div>
#{/if}

<div class="bloc">

    <div class="title">
      Liste des Tiers
    </div>
    
    <div class="content">
      <section>
      
        #{if flash.success}
		  <div class="notif success">
		     <strong>Succ&eacute;s :</strong> ${flash.success} <a href="#!" class="close"></a>
		  </div>
		#{/if}
      
        #{if tiers == null}
        <ul class="actions">
           <li><a href="@{Tiers.ajouter()}" class="button">Ajouter un Tiers</a></li>
        </ul>
        #{/if}
      
		<table>
		<thead>
		  <tr>
		    <th>Désignation</th>
		    <th>Civilité</th>
		    <th>Nom</th>
		    <th>Prénom</th>
		    <th></th>
		  </tr>
		</thead>
		<tfoot></tfoot>
		<tbody>
		  #{list items:tiersListe, as:'ligne'}
		  <tr>
		    <td>${ligne.designation}</td>
		    <td>${ligne.civilite}</td>
		    <td>${ligne.nom}</td>
		    <td>${ligne.prenom}</td>
		    <td>
		      <a href="@{Tiers.editer(ligne.id)}" title="Editer"><img src="@{'/public/images/edit.png'}" alt="Editer" class="editer"></a>
		      <a href="@{Tiers.supprimer(ligne.id)}" title="Supprimer" class="supprimer"><img src="@{'/public/images/delete.png'}" alt="Supprimer"></a>
		    </td>
		  </tr>
		  #{/list}
		</tbody>
		</table>
       
      </section>
	</div>
</div>